{% extends "base.html" %}

{% block title %}Review Applications - Academia Connect{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <div>
            <h1>Applications for Your Projects</h1>
            <p style="color: #6c757d; margin-top: 0.5rem;">Review teams that have been approved by faculty</p>
        </div>
    </div>

    <div class="table-container">
        <h3 style="margin-bottom: 1rem; color: var(--primary);">ðŸ“‹ Faculty-Approved Applications</h3>
        
        {% if applications %}
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Team Name</th>
                    <th>Project Title</th>
                    <th>Team Statement</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td><strong>#{{ app[0] }}</strong></td>
                    <td>{{ app[1] }}</td>
                    <td>{{ app[2] }}</td>
                    <td>{{ app[3][:80] }}{% if app[3]|length > 80 %}...{% endif %}</td>
                    <td>
                        <span class="project-status status-pending">
                            {{ app[4] }}
                        </span>
                    </td>
                    <td>
                        <div style="display: flex; gap: 0.5rem;">
                            <a href="{{ url_for('application_bp.application_details', app_id=app[0]) }}" class="btn btn-outline btn-sm">
                                View Details
                            </a>
                            
                            <form action="{{ url_for('application_bp.update_application_status') }}" method="POST" style="display: inline;">
                                <input type="hidden" name="application_id" value="{{ app[0] }}">
                                
                                <button type="submit" name="action" value="Approve" class="btn btn-success btn-sm">
                                    âœ“ Accept
                                </button>
                            </form>
                            
                            <form action="{{ url_for('application_bp.update_application_status') }}" method="POST" style="display: inline;">
                                <input type="hidden" name="application_id" value="{{ app[0] }}">
                                
                                <button type="submit" name="action" value="Reject" class="btn btn-danger btn-sm">
                                    âœ— Reject
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: #6c757d;">
            <p style="font-size: 1.2rem;">No pending applications at this time.</p>
            <p>Faculty-approved applications will appear here for your final review.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}